<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª</title>

<style>
:root{
 --main:#1976d2;
 --bg:#f4f6f9;
 --card:#fff;
 --warn:#fff3cd;
 --danger:#f8d7da;
 --unpaid:#fdecea;
}
body{
 font-family:Arial;
 background:var(--bg);
 margin:0;
 padding:15px;
}
h2{text-align:center;color:var(--main)}
.card{
 background:var(--card);
 padding:15px;
 border-radius:8px;
 margin-bottom:15px;
}
input,select,button{
 width:100%;
 padding:10px;
 margin:5px 0;
}
button{
 background:var(--main);
 color:#fff;
 border:none;
 border-radius:5px;
 cursor:pointer;
}
table{
 width:100%;
 border-collapse:collapse;
 min-width:1100px;
}
th,td{
 border:1px solid #ccc;
 padding:6px;
 text-align:center;
 font-size:13px;
}
th{background:var(--main);color:#fff}
.warn{background:var(--warn)}
.danger{background:var(--danger)}
.unpaid{background:var(--unpaid)}
.days-box{
 padding:4px 8px;
 border-radius:12px;
 font-weight:bold;
}
.days-ok{background:#e8f5e9;color:#2e7d32}
.days-warn{background:#fff3e0;color:#ef6c00}
.days-expired{background:#fdecea;color:#c62828}
</style>
</head>

<body>

<h2>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª</h2>

<div class="card">
 <input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†">
 <input id="phone" placeholder="Ø§Ù„Ù‡Ø§ØªÙ">
 <input id="email" placeholder="Email">
 <input id="profil" placeholder="Profil (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
 <select id="product">
  <option value="">Ø§Ù„Ù…Ù†ØªØ¬</option>
  <option>Netflix</option>
  <option>Shahid</option>
  <option>IPTV</option>
 </select>
 <input id="price" type="number" placeholder="Ø§Ù„Ø³Ø¹Ø±">
 <input id="days" type="number" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…">
 <button onclick="addSub()">â• Ø¥Ø¶Ø§ÙØ©</button>
</div>

<div class="card">
<table>
<thead>
<tr>
 <th>Ø§Ù„Ø§Ø³Ù…</th>
 <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
 <th>Email</th>
 <th>Profil</th>
 <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
 <th>Ø§Ù„Ø³Ø¹Ø±</th>
 <th>Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</th>
 <th>â³ Ø§Ù„Ø£ÙŠØ§Ù…</th>
 <th>Ù…Ø¯ÙÙˆØ¹</th>
 <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
</tr>
</thead>
<tbody id="list"></tbody>
</table>
</div>

<script>
const nameInput=document.getElementById("name");
const phoneInput=document.getElementById("phone");
const emailInput=document.getElementById("email");
const profilInput=document.getElementById("profil");
const productInput=document.getElementById("product");
const priceInput=document.getElementById("price");
const daysInput=document.getElementById("days");
const list=document.getElementById("list");

let subs=JSON.parse(localStorage.getItem("subs")||"[]");

function save(){
 localStorage.setItem("subs",JSON.stringify(subs));
}

function fmt(d){
 return d.getFullYear()+"/"+
 String(d.getMonth()+1).padStart(2,"0")+"/"+
 String(d.getDate()).padStart(2,"0");
}

function addSub(){
 if(
  !nameInput.value ||
  !phoneInput.value ||
  !productInput.value ||
  priceInput.value<=0 ||
  daysInput.value<=0
 ){
  alert("Ø¹Ù…Ù‘Ø± Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù„Ø§Ø²Ù…Ø©");
  return;
 }

 let start=new Date(); start.setHours(0,0,0,0);
 let end=new Date(start);
 end.setDate(end.getDate()+Number(daysInput.value));

 subs.push({
  id:Date.now(),
  name:nameInput.value,
  phone:phoneInput.value,
  email:emailInput.value,
  profil:profilInput.value,
  product:productInput.value,
  price:Number(priceInput.value),
  end:end.toISOString(),
  paid:false
 });

 save();
 nameInput.value=phoneInput.value=emailInput.value=profilInput.value=priceInput.value=daysInput.value="";
 productInput.value="";
 render();
}

function togglePaid(id){
 let s=subs.find(x=>x.id===id);
 s.paid=!s.paid;
 save(); render();
}

function editSub(id){
 let s=subs.find(x=>x.id===id);

 let n=prompt("Ø§Ù„Ø§Ø³Ù…",s.name); if(n===null)return;
 let p=prompt("Ø§Ù„Ù‡Ø§ØªÙ",s.phone); if(p===null)return;
 let e=prompt("Email",s.email||""); if(e===null)return;
 let pr=prompt("Profil",s.profil||""); if(pr===null)return;
 let prod=prompt("Ø§Ù„Ù…Ù†ØªØ¬",s.product); if(prod===null)return;
 let price=prompt("Ø§Ù„Ø³Ø¹Ø±",s.price); if(price===null)return;

 s.name=n;
 s.phone=p;
 s.email=e;
 s.profil=pr;
 s.product=prod;
 s.price=Number(price);

 save(); render();
}

function deleteSub(id){
 if(!confirm("Ø­Ø°ÙØŸ"))return;
 subs=subs.filter(x=>x.id!==id);
 save(); render();
}

function render(){
 list.innerHTML="";
 let today=new Date(); today.setHours(0,0,0,0);

 subs.forEach(s=>{
  let end=new Date(s.end); end.setHours(0,0,0,0);
  let diff=Math.floor((end-today)/86400000);

  let tr=document.createElement("tr");
  if(diff<0)tr.classList.add("danger");
  else if(diff<=3)tr.classList.add("warn");
  if(!s.paid)tr.classList.add("unpaid");

  tr.innerHTML=`
<td>${s.name}</td>
<td>${s.phone}</td>
<td>${s.email||"-"}</td>
<td>${s.profil||"-"}</td>
<td>${s.product}</td>
<td>${s.price}</td>
<td>${fmt(end)}</td>
<td>
 <span class="days-box ${
  diff<0?'days-expired':diff<=3?'days-warn':'days-ok'
 }">${diff}</span>
</td>
<td><input type="checkbox" ${s.paid?"checked":""} onclick="togglePaid(${s.id})"></td>
<td>
 <button onclick="editSub(${s.id})">âœï¸</button>
 <button onclick="deleteSub(${s.id})">ğŸ—‘</button>
</td>`;
  list.appendChild(tr);
 });
}

render();
</script>

</body>
</html>
